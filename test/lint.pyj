# vim:fileencoding=utf-8
# License: GPL v3
# Copyright: 2015, Kovid Goyal <kovid at kovidgoyal.net>

linter = require('../tools/lint.js')

def lint(code):
    return linter.lint_code(code, {filename:'<test>', report:def():
                                   pass
})

def err_test(code, ident, line):
    msgs = lint(code)
    assert.equal(len(msgs), 1, 'failed to find error in: ' + code)
    assert.equal(msgs[0].ident, ident, 'incorrect ident: ' + msgs[0].ident + ' for: ' + code)
    if line != undefined:
        assert.equal(msgs[0].start_line, line, 'incorrect line: ' + msgs[0].start_line + ' for: ' + code)

err_test('import foo', 'unused-import', 1)
